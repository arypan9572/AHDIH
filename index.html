<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Glitch Meme CRT Zone</title>
<link href="https://fonts.cdnfonts.com/css/inter" rel="stylesheet">

<style>
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  overflow:hidden;
  background:#000;
  font-family:'Inter',sans-serif;
}

canvas{position:absolute;inset:0;}

#grain{
  position:fixed;inset:0;
  pointer-events:none;
  background-image:repeating-linear-gradient(
    0deg,
    rgba(255,255,255,0.03) 0px,
    rgba(255,255,255,0.03) 1px,
    transparent 1px,
    transparent 2px
  );
  opacity:0.15;
  animation:grainShift 0.15s infinite linear;
  z-index:10;
}

@keyframes grainShift{
  from{transform:translateY(0)}
  to{transform:translateY(2px)}
}

#vignette{
  position:fixed;inset:0;
  pointer-events:none;
  background:radial-gradient(circle at center,
    rgba(0,0,0,0) 40%,
    rgba(0,0,0,0.6) 100%);
  z-index:10;
}
</style>
</head>

<body>

<canvas id="trail"></canvas>
<canvas id="fx"></canvas>
<div id="grain"></div>
<div id="vignette"></div>

<script>
const fx=document.getElementById("fx");
const trail=document.getElementById("trail");
const ctx=fx.getContext("2d");
const tctx=trail.getContext("2d");

let w,h,cx,cy;
function resize(){
  w=fx.width=trail.width=innerWidth;
  h=fx.height=trail.height=innerHeight;
  cx=w/2; cy=h/2;
}
addEventListener("resize",resize);
resize();

/* ==== BACKGROUND IMAGES (from your game) ==== */
const bgImg = new Image();
bgImg.src="bg.png";

const bgImg2 = new Image();
bgImg2.src="goonerola.png";

const bgObj={
  x:w/2,y:h/2,
  vx:(Math.random()*0.6+0.2)*(Math.random()<0.5?-1:1),
  vy:(Math.random()*0.6+0.2)*(Math.random()<0.5?-1:1),
  size:120
};

const bgObj2={
  x:Math.random()*w,y:Math.random()*h,
  vx:(Math.random()*0.7+0.3)*(Math.random()<0.5?-1:1),
  vy:(Math.random()*0.7+0.3)*(Math.random()<0.5?-1:1),
  size:100
};

/* ==== MOUSE ==== */
let mouse={x:cx,y:cy};
addEventListener("mousemove",e=>{
  mouse.x=e.clientX;
  mouse.y=e.clientY;
});

/* ==== DONUT PARTICLES ==== */
const donut=[...Array(500)].map(()=>({
  a:Math.random()*Math.PI*2,
  r:90+Math.random()*140,
  s:1+Math.random()*2,
  h:Math.random()*360,
  l:Math.random()*Math.PI*2
}));

let time=0;
let rotation=0;

/* ==== FUNNY MESSAGES ==== */
const memes=[
  "magic genie pls buff me",
  "bro this CRT hittin",
  "who summoned the donut",
  "mouse powered reality",
  "windows xp ahh effect",
  "goonerola jumpscare",
  "anjelbert have dih"
];

/* ==== GLITCH TEXT ==== */
function drawGlitchText(text){
  const jitterX=(Math.random()-0.5)*6;
  const jitterY=(Math.random()-0.5)*6;

  ctx.fillStyle="#000";
  ctx.fillText(text, jitterX, jitterY);

  ctx.fillStyle="#ff00ff";
  ctx.fillText(text, 3+jitterX, -2+jitterY);

  ctx.fillStyle="#00ffff";
  ctx.fillText(text, -3+jitterX, 2+jitterY);

  ctx.fillStyle="#ffffff";
  ctx.fillText(text, 1+jitterX, 3+jitterY);
}

/* ==== LOOP ==== */
function loop(){
  time+=0.016;
  rotation+=0.01;

  /* motion blur trail */
  tctx.fillStyle="rgba(0,0,0,0.15)";
  tctx.fillRect(0,0,w,h);
  ctx.clearRect(0,0,w,h);

  /* background image movement */
  bgObj.x+=bgObj.vx;
  bgObj.y+=bgObj.vy;
  if(bgObj.x<bgObj.size||bgObj.x>w-bgObj.size) bgObj.vx*=-1;
  if(bgObj.y<bgObj.size||bgObj.y>h-bgObj.size) bgObj.vy*=-1;

  bgObj2.x+=bgObj2.vx;
  bgObj2.y+=bgObj2.vy;
  if(bgObj2.x<bgObj2.size||bgObj2.x>w-bgObj2.size) bgObj2.vx*=-1;
  if(bgObj2.y<bgObj2.size||bgObj2.y>h-bgObj2.size) bgObj2.vy*=-1;

  /* PARALLAX BASED ON MOUSE */
  const parallax1=0.02;
  const parallax2=0.05;

  const offsetX1=(mouse.x-cx)*parallax1;
  const offsetY1=(mouse.y-cy)*parallax1;

  const offsetX2=(mouse.x-cx)*parallax2;
  const offsetY2=(mouse.y-cy)*parallax2;

  if(bgImg.complete){
    ctx.globalAlpha=0.25;
    ctx.drawImage(bgImg,
      bgObj.x-bgObj.size/2-offsetX1,
      bgObj.y-bgObj.size/2-offsetY1,
      bgObj.size,bgObj.size);
  }

  if(bgImg2.complete){
    ctx.globalAlpha=0.25;
    ctx.drawImage(bgImg2,
      bgObj2.x-bgObj2.size/2-offsetX2,
      bgObj2.y-bgObj2.size/2-offsetY2,
      bgObj2.size,bgObj2.size);
  }
  ctx.globalAlpha=1;

  /* DONUT */
  donut.forEach(p=>{
    p.a+=0.02;
    let wave=Math.sin(time+p.l)*40;
    let r=p.r+wave;

    let x=Math.cos(p.a+rotation)*r;
    let y=Math.sin(p.a+rotation)*r;

    ctx.fillStyle=`hsla(${p.h+time*60},100%,60%,0.7)`;
    ctx.beginPath();
    ctx.arc(cx+x,cy+y,p.s,0,Math.PI*2);
    ctx.fill();
  });

  /* TEXT */
  ctx.save();
  ctx.translate(cx,cy);
  ctx.rotate(Math.sin(time)*0.3);
  ctx.scale(1+Math.sin(time*2)*0.2,1+Math.cos(time*2)*0.2);
  ctx.font="64px Inter";
  ctx.textAlign="center";
  ctx.shadowBlur=20;
  drawGlitchText(memes[Math.floor(time*2)%memes.length]);
  ctx.restore();

  /* CRT SCANLINES */
  ctx.fillStyle="rgba(0,0,0,0.25)";
  for(let y=0;y<h;y+=3){
    ctx.fillRect(0,y,w,1);
  }

  /* RANDOM FLASH */
  if(Math.random()<0.02){
    ctx.fillStyle="rgba(255,255,255,0.2)";
    ctx.fillRect(0,0,w,h);
  }

  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
