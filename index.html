<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>anjelbert zone</title>
<link href="https://fonts.cdnfonts.com/css/inter" rel="stylesheet">

<style>
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  overflow:hidden;
  background:#000;
  font-family:'Inter',sans-serif;
}

canvas{position:absolute;inset:0;}

#grain{
  position:fixed;inset:0;
  pointer-events:none;
  background-image:repeating-linear-gradient(
    0deg,
    rgba(255,255,255,0.03) 0px,
    rgba(255,255,255,0.03) 1px,
    transparent 1px,
    transparent 2px
  );
  opacity:0.15;
  animation:grainShift 0.15s infinite linear;
  z-index:10;
}

#vignette{
  position:fixed;inset:0;
  pointer-events:none;
  background:radial-gradient(circle at center,
    rgba(0,0,0,0) 40%,
    rgba(0,0,0,0.6) 100%);
  z-index:10;
}

@keyframes grainShift{
  from{transform:translateY(0)}
  to{transform:translateY(2px)}
}
</style>
</head>

<body>

<canvas id="fx"></canvas>
<div id="grain"></div>
<div id="vignette"></div>

<script>
const fx=document.getElementById("fx");
const ctx=fx.getContext("2d");

let w,h,cx,cy;
function resize(){
  w=fx.width=innerWidth;
  h=fx.height=innerHeight;
  cx=w/2; cy=h/2;
}
addEventListener("resize",resize);
resize();

/* ===== BACKGROUND SWITCH ===== */
let bgToggle=false;
setInterval(()=>bgToggle=!bgToggle,60000);

/* ===== IMAGES ===== */
const img1=new Image();
const img2=new Image();
img1.src="bg.png";
img2.src="goonerola.png";

let imgA={x:100,y:100,vx:2,vy:1.5,rot:0};
let imgB={x:400,y:300,vx:-1.8,vy:2,rot:0};

const imgSize=120;

/* ===== MOUSE ===== */
let mouse={x:cx,y:cy};
addEventListener("mousemove",e=>{
  mouse.x=e.clientX;
  mouse.y=e.clientY;
});

/* ===== TEXT MEMES ===== */
const memes=[
  "anjelbert have dih",
  "anjelbert moment",
  "anjelbert.exe",
  "anjelbert certified",
  "anjelbert core",
  "only anjelbert",
  "anjelbert energy"
];
let memeIndex=0;
setInterval(()=>{
  memeIndex=(memeIndex+1)%memes.length;
},3000);

/* ===== GLITCH BURST ===== */
let glitchBurst=false;
let glitchCount=0;
setInterval(()=>{
  glitchBurst=true;
  glitchCount=0;
},3500);

/* ===== DONUT ===== */
const donut=[...Array(700)].map(()=>({
  a:Math.random()*Math.PI*2,
  r:90+Math.random()*120,
  s:1.2+Math.random()*1.5,
  h:Math.random()*360,
  l:Math.random()*Math.PI*2
}));

let time=0;
let rotation=0;

/* ===== GLITCH TEXT ===== */
function drawGlitchText(text){
  const jx=(Math.random()-0.5)*6;
  const jy=(Math.random()-0.5)*6;

  ctx.fillStyle="#000";
  ctx.fillText(text,jx,jy);

  ctx.fillStyle="#ff00ff";
  ctx.fillText(text,4+jx,-2+jy);

  ctx.fillStyle="#00ffff";
  ctx.fillText(text,-4+jx,2+jy);

  ctx.fillStyle="#ffffff";
  ctx.fillText(text,2+jx,4+jy);
}

/* ===== CRT / VHS SHADER (ADDED) ===== */
function drawVHS(){
  // scanlines
  for(let y=0;y<h;y+=3){
    ctx.fillStyle="rgba(0,0,0,0.15)";
    ctx.fillRect(0,y,w,1);
  }

  // RGB shift
  const shift=Math.sin(time*4)*2;
  ctx.globalCompositeOperation="screen";
  ctx.drawImage(fx,shift,0);
  ctx.drawImage(fx,-shift,0);
  ctx.globalCompositeOperation="source-over";

  // noise
  for(let i=0;i<200;i++){
    ctx.fillStyle=`rgba(255,255,255,${Math.random()*0.04})`;
    ctx.fillRect(Math.random()*w,Math.random()*h,1,1);
  }

  // vignette
  const grad=ctx.createRadialGradient(cx,cy,w*0.2,cx,cy,w*0.7);
  grad.addColorStop(0,"rgba(0,0,0,0)");
  grad.addColorStop(1,"rgba(0,0,0,0.4)");
  ctx.fillStyle=grad;
  ctx.fillRect(0,0,w,h);
}

/* ===== LOOP ===== */
function loop(){
  time+=0.016;
  rotation+=0.02;

  document.body.style.background = bgToggle ? "#c9b24a" : "#000000";

  ctx.clearRect(0,0,w,h);

  /* ===== MOVE IMAGES ===== */
  [imgA,imgB].forEach(obj=>{
    obj.x+=obj.vx;
    obj.y+=obj.vy;
    obj.rot+=0.01;

    if(obj.x<0 || obj.x+imgSize>w) obj.vx*=-1;
    if(obj.y<0 || obj.y+imgSize>h) obj.vy*=-1;
  });

  ctx.save();
  ctx.translate(imgA.x+imgSize/2,imgA.y+imgSize/2);
  ctx.rotate(imgA.rot);
  ctx.drawImage(img1,-imgSize/2,-imgSize/2,imgSize,imgSize);
  ctx.restore();

  ctx.save();
  ctx.translate(imgB.x+imgSize/2,imgB.y+imgSize/2);
  ctx.rotate(-imgB.rot);
  ctx.drawImage(img2,-imgSize/2,-imgSize/2,imgSize,imgSize);
  ctx.restore();

  /* ===== DONUT ===== */
  donut.forEach(p=>{
    p.a+=0.02;

    let wave=Math.sin(time+p.l)*40;
    let morph=Math.cos(time*2+p.l)*30;
    let r=p.r+wave+morph;

    let x=Math.cos(p.a+rotation)*r + (mouse.x-cx)/10;
    let y=Math.sin(p.a+rotation)*r + (mouse.y-cy)/10;

    if(glitchBurst && Math.random()<0.4) return;

    ctx.fillStyle=`hsla(${p.h+time*60},100%,55%,1)`;
    ctx.beginPath();
    ctx.arc(cx+x,cy+y,p.s,0,Math.PI*2);
    ctx.fill();
  });

  let visible=true;
  if(glitchBurst){
    visible=Math.random()>0.5;
    glitchCount++;
    if(glitchCount>10) glitchBurst=false;
  }

  if(visible){
    const stretchX = 1 + Math.sin(time*5)*0.5;
    const stretchY = 1 + Math.cos(time*4)*0.4;

    const wobbleX = Math.sin(time*12)*8;
    const wobbleY = Math.cos(time*10)*8;

    const rot = Math.sin(time*3)*0.4;

    ctx.save();
    ctx.translate(cx,cy);
    ctx.rotate(rot);
    ctx.scale(stretchX,stretchY);
    ctx.translate(wobbleX,wobbleY);

    ctx.font="64px Inter";
    ctx.textAlign="center";
    ctx.shadowBlur=30;

    drawGlitchText(memes[memeIndex]);
    ctx.restore();
  }

  if(Math.random()<0.02){
    ctx.fillStyle="rgba(255,255,255,0.25)";
    ctx.fillRect(0,0,w,h);
  }

  // APPLY CRT SHADER (ADDED)
  drawVHS();

  requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>
